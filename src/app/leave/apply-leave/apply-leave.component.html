<div class="min-h-screen bg-background p-6">
  <div class="max-w-2xl mx-auto">
    <div class="bg-card rounded-xl shadow-sm p-8">
      <div class="flex items-center justify-between mb-8">
        <h1 class="text-2xl font-bold text-text-primary">Apply for Leave</h1>
        <button
          (click)="goBack()"
          class="px-4 py-2 text-text-muted hover:text-text-primary transition-colors"
        >
          ‚Üê Back to Dashboard
        </button>
      </div>

      <form [formGroup]="leaveForm" (ngSubmit)="onSubmit()" class="space-y-6">
        <!-- Leave Type -->
        <div>
          <label for="leaveType" class="block text-sm font-medium text-text-primary mb-2">Leave Type</label>
          <select
            id="leaveType"
            formControlName="leaveType"
            class="w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"
            aria-describedby="leaveType-error"
          >
            <option value="">Select leave type</option>
            <option *ngFor="let type of leaveTypes" [value]="type">{{ type | titlecase }}</option>
          </select>
          <div *ngIf="leaveForm.get('leaveType')?.invalid && leaveForm.get('leaveType')?.touched" id="leaveType-error" class="mt-1 text-sm text-red-600" role="alert">
            Please select a leave type.
          </div>
        </div>

        <!-- Date Range -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label for="startDate" class="block text-sm font-medium text-text-primary mb-2">Start Date</label>
            <input
              id="startDate"
              type="date"
              formControlName="startDate"
              class="w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"
              aria-describedby="startDate-error"
            >
            <div *ngIf="leaveForm.get('startDate')?.invalid && leaveForm.get('startDate')?.touched" id="startDate-error" class="mt-1 text-sm text-red-600" role="alert">
              Start date is required.
            </div>
          </div>

          <div>
            <label for="endDate" class="block text-sm font-medium text-text-primary mb-2">End Date</label>
            <input
              id="endDate"
              type="date"
              formControlName="endDate"
              class="w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"
              aria-describedby="endDate-error"
            >
            <div *ngIf="leaveForm.get('endDate')?.invalid && leaveForm.get('endDate')?.touched" id="endDate-error" class="mt-1 text-sm text-red-600" role="alert">
              End date is required.
            </div>
          </div>
        </div>

        <!-- Reason -->
        <div>
          <label for="reason" class="block text-sm font-medium text-text-primary mb-2">Reason</label>
          <textarea
            id="reason"
            formControlName="reason"
            rows="4"
            class="w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"
            placeholder="Please provide a detailed reason for your leave request..."
            aria-describedby="reason-error"
          ></textarea>
          <div *ngIf="leaveForm.get('reason')?.invalid && leaveForm.get('reason')?.touched" id="reason-error" class="mt-1 text-sm text-red-600" role="alert">
            Reason must be at least 10 characters.
          </div>
        </div>

        <!-- Attachment -->
        <div>
          <label for="attachment" class="block text-sm font-medium text-text-primary mb-2">Attachment (Optional)</label>
          <input
            id="attachment"
            type="file"
            (change)="onFileChange($event)"
            accept=".pdf,.doc,.docx,.jpg,.png"
            class="w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"
          >
          <p class="mt-1 text-xs text-text-muted">Supported formats: PDF, DOC, DOCX, JPG, PNG</p>
        </div>

        <!-- Error/Success Messages -->
        <div *ngIf="errorMessage" class="text-sm text-red-600 bg-red-50 p-3 rounded-lg" role="alert">
          {{ errorMessage }}
        </div>

        <div *ngIf="successMessage" class="text-sm text-green-600 bg-green-50 p-3 rounded-lg" role="alert">
          {{ successMessage }}
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          [disabled]="isLoading"
          class="w-full bg-primary hover:bg-primary-hover text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
          [attr.aria-busy]="isLoading"
        >
          <span *ngIf="isLoading" class="inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></span>
          {{ isLoading ? 'Submitting...' : 'Submit Leave Request' }}
        </button>
      </form>
    </div>
  </div>
</div>